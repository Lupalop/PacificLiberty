/*
 * This line should be ignored by the parser
 */

maxpoints 200
switches 3000

// Global messages
messages
    // Fallback
    f_1|I don't understand that!
    f_2|I don't know that word.
    f_3|What?
    f_4|You're confusing!
    // Talk
    t_1|There's nobody in here.
    t_2|There's no one to talk to.
    // Walk
    w_1|Where?
    w_2|May I know which direction?
    // Inventory
    i_1|This item is already in your inventory!
    i_2|This item is NOT in your inventory!
    i_3|You only have one item in your inventory:
    i_4|You have %s items in your inventory:%n
    i_5|%s: %s%n
    i_6|Your inventory is empty!
    // Points
    p_1|You currently have %s of %s points.%n
    // Save/Load Game
    sl_1|Enter the name of your saved game:
    sl_2|Invalid name.
    sl_3|Name too long! Try a shorter name for your saved game.
    sl_4|The specified saved game was not found.
    sl_5|Your game has been loaded!
    sl_6|Your game cannot be saved.
    sl_7|Your game has been saved!
    go|Game over.
end

group $_f
    printr,f_1,f_2,f_3,f_4
end

group $_t
    printr,t_1,t_2
end

group $_w
    printr,w_1,w_2
end

// Global actions
actions
    fallback|goto,$_f
    talk|goto,$_t
    walk|goto,$_w
    quit|quit
    inventory,check inventory,get inventory,inv,check inv,get inv|inv,list
    points|points,list
end

// Scenes
scene initial
    messages
        sA0|A young man discovered an entryway to the past in their ancestor’s old house.%nIt’s as if he has entered into an entirely new world, back in the 1940s, with %npeople looming in the background and the streets bustling with life. There was %na crowd forming around the capitol building. %n%nSgt. Miller, a man of the American forces, is holding a clipboard bearing the %nnames of the Filipino troops who will fight alongside the Americans to stop the %nJapanese army. %n%n“Pack-up, lads!” said the Sgt.
        sA1|“Make a move on, kid! Unless you want to die at the hands of your foolishness.”
        sA2|“Majority of the soldiers here will be evacuated by boat to Bataan %nPeninsula to stop those sons of a gun from invading.”
        sA3|You look up the sky and saw there were aircrafts flying fast in the %nclear and humid sky of Pampanga. Many people were shouting how annoying the %nUS Navy is for showing off their flying formation. However, one look at it and %nyou will know which country it truly belonged to. %n%n“It’s the Japs! Run for shelter! Bombs!”
        sA4|You saw a huge rock coming your way, should you jump over?
        d_sA0|You did not jump which lead to you stumbling over. As you lay down, you can see %nthe bombs dropping from the sky by the Japanese.
    end
    
    group $
        print,sA0
    end
    
    group fallback_override
        print,sA1
    end
    
    actions
        look,view,see|goto,$
        fallback|print,sA1
        pack,get,bag,pack up,take bag,pack bag,take up,get up,move bag, move up|goto,event_1
        head to boat,go to boat,goto boat,head boat,walk boat,to boat,go boat,boat,run boat,run to boat|goto,event_2
        run,runaway,run away,run far,run faraway,run north,run south,run east,run west|goto,event_3
        yes,y,ok,sure,why not,of course,yep|goto,event_4a
        no,no way,nope,nah,not in a million years,nooo,never,nahhhh|goto,event_4b
    end
    
    group event_1
        if !1
            print,sA2
            set,1,true
        else
            goto,fallback_override
        end
    end
    
    group event_2
        if 1,!2
            print,sA3
            set,2,true
            scene,s_B
        else
            goto,fallback_override
        end
    end
    
    group event_3
        if 1,2,!3
            print,sA4
            set,3,true
        else
            goto,fallback_override
        end
    end
    
    group event_4a
        if 1,2,3,!4
            set,4,true
            scene,sB
        else
            goto,fallback_override
        end
    end
    
    group event_4b
        if 1,2,3,!4
            printc,d_sA0,%n,go
            quit
        else
            goto,fallback_override
        end
    end
end

scene sB

    messages
        sB0|You’ve found 3 potential shelters: %nunder a tree, inside a broken house, and a trench. %n%nWhich will you choose to hide in?
        sB1|You have lived to see another daylight. %nYou saw the general in the trench and approached him. 
        sB2|“The American and Philippine forces have started to surrender to the Japanese.” %nOh, how bad news indeed.
        sB3|“They have given out surrender tickets to our soldiers. Approach them in their %nheadquarters while waving a white flag and your guns pointed behind you.” %nThe general looked doubtful about it though.
        sB4|“Well, if you'd ask me, this ticket system is sketchy. %nBut we'll never know. Best not lose hope in war, kid. Will you go? %nI can accompany you until we reach their camp.”
        d_SB0|Your hiding spot was unsafe. It got bombed and you died!
    end
    
    group $
        print,sB0
    end

    actions
        under a tree,under tree,tree,tree under,inside the house,inside house,inside,house,the house|goto,event_1
        in the trench,trench,walk to trench,walk trench,in trench,the trench,to trench,run trench,run to trench,walk to the trench,run to the trench,run the trench,walk the trench|goto,event_2
        talk,converse,talk general,talk to general,converse general,converse with general,chat,chat to general,chat with general,chat general,speak,speak to general,speak with general,speak general,speak up,talk to,chat to,chat with,talk with,converse with,interact,interact with general,interact with,interact to,interact to general|goto,event_3
        yes,sure,certainly,of course,no problem,yeah,yez|goto,event_4
    end
    
    group event_1
        print,d_SB0
        quit
    end
    
    group event_2
        if !5
            print,sB1
            set,5,true
        else
            goto,$_f
        end
    end
    
    group event_3
        if 5,!6
            print,sB2
            set,6,true
        else
            if 5,6,!7
                print,sB3
                set,7,true
            else
                if 5,6,7,!8
                    print,sB4
                    set,8,true
                else
                    goto,$_f
                end
            end
        end
    end
    
    group event_4
    end
end